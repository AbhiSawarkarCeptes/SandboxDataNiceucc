/* Bypass Framework Enabled */
trigger PaymentRequestTrigger on Payment_Request__c (before update, after update, before insert, after insert) {
    
    Bypass_Setting__c bypassSettingInstance = Bypass_Setting__c.getInstance();  
    if( bypassSettingInstance.Bypass_Backend_Automations__c){
        return;
    }
    
    list<Payment_Request__c> prList = new list<Payment_Request__c>();
    
    if(trigger.isBefore && trigger.isInsert){
        String test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
   
        
        Id userID = userInfo.getUserID();
        Map<Id, User> usersMap = new Map<Id, User>([SELECT Id, Name, UserRole.Name, ManagerId, Manager.Name, Manager.UserRoleId, Manager.Manager.Name FROM User WHERE Id =: userID]);
        
        for(Payment_Request__c pr : trigger.new){
            pr.Original_Amount__c = pr.Currency__c + ' ' + String.valueOf(pr.Amount__c);
            User createdByUser = usersMap.get(userID);
            if (createdByUser != null) {
                String createdByUserRole = createdByUser.UserRole != null ? createdByUser.UserRole.Name : 'N/A';
                String managerName = createdByUser.Manager != null ? createdByUser.Manager.Name : 'N/A';
                String managerManagerName = (createdByUser.Manager != null && createdByUser.Manager.Manager != null) ? createdByUser.Manager.Manager.Name : 'N/A';
                
                if(createdByUserRole.contains('Sales Manager'))
                {
                    pr.VP_For_PR__c = managerManagerName;
                }else if(createdByUserRole.contains('Sales Head'))
                {
                    pr.VP_For_PR__c = managerName;
                }else if(createdByUserRole.contains('CRM'))
                {
                    pr.VP_For_PR__c = 'CRM';
                }else if(createdByUserRole.contains('Collection'))
                {
                    pr.VP_For_PR__c = 'Collection';
                }else if(createdByUserRole.contains('CCC Team'))
                {
                    pr.VP_For_PR__c = 'Development';
                }
            }
        }
    }
    
    if(trigger.isBefore && trigger.isUpdate){
        //SOB-336 Unit blocking conflict - Both PR approved through website link
        PaymentRequestTriggerHandler.checkIfUnitConflict(trigger.new,trigger.oldMap);   
        for(Payment_Request__c pr : trigger.new){
            if(trigger.oldmap.get(pr.Id).Status__c != pr.Status__c){
                
                if(pr.Status__c == 'Rejected by System' && (trigger.oldmap.get(pr.Id).Status__c == 'Rejected by Accounts' || trigger.oldmap.get(pr.Id).Status__c == 'Rejected by Sales Ops')){
                    string sl = pr.Status_Lapse__c;
                    sl = sl.replace('Rejected by Accounts', 'Rejected by System');
                    sl = sl.replace('Rejected by Sales Ops', 'Rejected by System');
                    pr.Status_Lapse__c = sl;
                }
                else{
                    pr.Status_Lapse__c = (pr.Status_Lapse__c != null)?pr.Status_Lapse__c + ' \n' + pr.Status__c + ' - ' + system.now().format('dd/MM/YYYY hh:mm:ss a') : pr.Status__c + ' - ' + system.now().format('dd/MM/YYYY hh:mm:ss a');
                }
                
                if(pr.Status__c == 'Amount Confirmed by Accounts'){ pr.Status__c = 'Approved'; }
                if(PaymentRequestFormController.PaymentRequestTriggerFirstRunFlag && pr.Status__c == 'Approved' && pr.Mode_Option__c == 'Multi Mode' && pr.Secondary_Mode__c == null){
                    if(pr.Payment_Request__c == null || (pr.Other_Mode_Status__c != 'Approved' && pr.Other_Mode_Status__c != 'Submitted to Accounts for Amount Confirmation')){ pr.Status__c = 'Partially Approved'; }
                }
                
            }
            if(pr.Submitted_Date__c != trigger.oldmap.get(pr.Id).Submitted_Date__c && pr.Status__c == 'Resubmitted to SM/SD'){
                if(pr.Mode__c == 'OTC Deposits' || pr.Mode__c == 'Cheque' || pr.Mode__c == 'Credit Card'){
                    pr.Status__c = 'Pending for Accounts Approval';
                }
                //SOB-403 Aayushi added CDM cash condition
                else if(pr.Mode__c == 'CDM Cash' || pr.Mode__c == 'CDM Cheque' || pr.Mode__c == 'International Wire Transfer'  || pr.Mode__c == 'Domestic Wire Transfer'){
                    pr.Status__c = 'Pending for Sales Ops Approval';
                }
            }
            if (pr.Status__c == 'Pending for Accounts Approval') { pr.Account_Received_Date__c = System.today(); }
        }
        if(PaymentRequestTriggerHandler.totalAmountFirstRunFlag1)
            PaymentRequestTriggerHandler.calculateTotalAmountOnSecondaryPR(trigger.new,trigger.oldMap);
        
        //Capture Accounts Team Modifications
        if(PaymentRequestTriggerHandler.financeUserFlag)
            PaymentRequestTriggerHandler.financeUserFieldsUpdate(trigger.new,trigger.oldMap);
    }
    
    if(trigger.isAfter && trigger.isInsert){
        list<Payment_Request__c> prToUpdateSecondaryModeOnFirst = new list<Payment_Request__c>();
        for(Payment_Request__c pr : trigger.new){
            if(pr.Payment_Request__c != null){
                Payment_Request__c firstPR = new Payment_Request__c();
                firstPR.Id = pr.Payment_Request__c;
                firstPR.Payment_Request__c = pr.Id;
                prToUpdateSecondaryModeOnFirst.add(firstPR);
            }
        }
        if(prToUpdateSecondaryModeOnFirst.size() > 0){
            try{ update prToUpdateSecondaryModeOnFirst; }
            catch(Exception e){ }
        }
    }
    
    if(trigger.isAfter && trigger.isUpdate){
        list<string> firstModeReqs = new list<string>();
        list<string> firstModeIWTCases = new list<string>();
        list<string> prToReject = new list<string>();
        for(Payment_Request__c pr : trigger.new){
            if(trigger.oldmap.get(pr.Id).Status__c != pr.Status__c){
                if(pr.Status__c == 'Approved' && pr.Mode_Option__c == 'Multi Mode' && pr.Secondary_Mode__c != null){ firstModeReqs.add(pr.Payment_Request__c); }
                if(pr.Status__c == 'Submitted to Accounts for Amount Confirmation' && pr.Mode_Option__c == 'Multi Mode' && pr.Payment_Request__c != null){ firstModeIWTCases.add(pr.Payment_Request__c); }
                if(pr.Status__c == 'Resubmitted to SM/SD'){ prToReject.add(pr.Id); }
            }
        }
        list<Payment_Request__c> prToUpdateStatus = new list<Payment_Request__c>();
        list<Payment_Request__c> prToUpdate = [select Id from Payment_Request__c where Id IN: firstModeReqs AND Status__c = 'Partially Approved'];
        
        for(Payment_Request__c p : prToUpdate){ p.Status__c = 'Approved'; prToUpdateStatus.add(p); }
        if(prToUpdateStatus.size() > 0){ PaymentRequestFormController.PaymentRequestTriggerFirstRunFlag = false; update prToUpdateStatus; }
        
        list<Payment_Request__c> prToUpdateStatusIWT = new list<Payment_Request__c>();
        list<Payment_Request__c> prToUpdateIWT = [select Id from Payment_Request__c where Id IN: firstModeIWTCases AND Status__c = 'Partially Approved'];
        
        for(Payment_Request__c p : prToUpdateIWT){ p.Status__c = 'Approved'; prToUpdateStatusIWT.add(p); }
        if(prToUpdateStatusIWT.size() > 0){ PaymentRequestFormController.PaymentRequestTriggerFirstRunFlag = false; update prToUpdateStatusIWT; }
        
        if(prToReject.size()>0){
            List<ProcessInstance> pendingAprrovalProcessList = [Select Id, TargetObjectId, Status From ProcessInstance Where Status='Pending' and TargetObjectId IN : prToReject];
            List<Id> processInstanceIDs = new List<Id>();
            for(ProcessInstance processIns : pendingAprrovalProcessList){
                processInstanceIDs.add(processIns.Id);
            }
            
            List<ProcessInstanceWorkitem> workItems = [SELECT Id, ProcessInstanceId  FROM ProcessInstanceWorkitem WHERE ProcessInstanceId IN :processInstanceIDs ];
            List<Approval.ProcessWorkitemRequest> allReq = new List<Approval.ProcessWorkitemRequest>(); 
            for(ProcessInstanceWorkitem work : workItems){
                Approval.ProcessWorkitemRequest req = new Approval.ProcessWorkitemRequest();
                req.setComments('Rejected by System'); 
                req.setAction('Reject');
                req.setWorkitemId(work.id);
                allReq.add(req);
            }
            Approval.ProcessResult[] result =  Approval.process(allReq);
        }
        if(PaymentRequestTriggerHandler.totalAmountFirstRunFlag2){
            PaymentRequestTriggerHandler.calculateTotalAmountOnPrimaryPrChange(trigger.new,trigger.oldMap);
        }
        
        //code written by yamini
        Activate_Track_Payment_Milestone__mdt tpmMetaData = [SELECT Label,Active__c,Booking_Created_Date__c,Enable_Other_Charges__c
                                                             FROM Activate_Track_Payment_Milestone__mdt];
        if(tpmMetaData.Enable_Other_Charges__c){
            List<Payment_Request__c> otherChargesPrList = new List<Payment_Request__c>();
            Set<String> excludedFees = new Set<String>{'Service charges','Community Management Service fees'}; // Jan 10 2024
                for(Payment_Request__c pr : trigger.new){
                    if(excludedFees.contains(pr.Others__c)) {
                        continue;
                    }
                    if(trigger.oldmap.get(pr.Id).Status__c != pr.Status__c){
                        if(pr.Status__c == 'Approved' && pr.Others__c != null && pr.Others__c != 'Late Payment Charges'){
                            otherChargesPrList.add(pr);
                            
                        }
                    }
                    
                    if(pr.Others__c != null && trigger.oldmap.get(pr.Id).Others__c != pr.Others__c && pr.status__c == 'Approved' && pr.Others__c != 'Late Payment Charges'){
                        if(pr.Mode__c == 'CDM Cash' || pr.Mode__c == 'International Wire Transfer' || pr.Mode__c == 'Domestic Wire Transfer'){
                            if(trigger.oldmap.get(pr.Id).Towards_Other_Charges_Amount__c != pr.Towards_Other_Charges_Amount__c ||
                               trigger.oldmap.get(pr.Id).Towards_Pre_Registration_Amount__c != pr.Towards_Pre_Registration_Amount__c){
                                   otherChargesPrList.add(pr);
                               }
                        }
                    }
                }
            if(otherChargesPrList.size() > 0){
                OtherChargesDemandController.createDemand(otherChargesPrList);
            }
        }
        // code end -- Yamini      
    }
    
}