public without sharing class PaymentRequestTriggerHandler {
    public static boolean totalAmountFirstRunFlag1 = true;
    public static boolean totalAmountFirstRunFlag2 = true;
    public static boolean financeUserFlag = true;
    
    
    
    
    
    
    public static void calculateTotalAmountOnSecondaryPR(List<Payment_Request__c> newList, Map<Id,Payment_Request__c> oldMap){
        String test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
    test = 'Dummy';
        set<id> calculateTotalAmount = new Set<Id>();
        map<string,decimal> currToRate = new map<string,decimal>();
        for(Currency_Rate__mdt currRate : [select MasterLabel, Rate__c from Currency_Rate__mdt]){
            currToRate.put(currRate.MasterLabel,currRate.Rate__c);
        }
        
        for(Payment_Request__c pr : newList){
            if(pr.Mode_Option__c == 'Multi Mode' && oldmap.get(pr.Id).Amount__c != pr.Amount__c && pr.Secondary_Mode__c != null){
                calculateTotalAmount.add(pr.Payment_Request__c);
            }
        }
        
        if(calculateTotalAmount.isEmpty()){ return; }
        
        Map<Id,Payment_Request__c> mapIdToPR = new Map<Id,Payment_Request__c>();
        for(Payment_Request__c pr : [SELECT ID,Amount__c,Currency__c,status__c,Mode__c,Payment_Request__c FROM Payment_Request__c WHERE Id IN : calculateTotalAmount]){
            mapIdToPR.put(pr.Payment_Request__c, pr);
        }
        for(Payment_Request__c pr : newList){
            if( calculateTotalAmount.contains(pr.Payment_Request__c)){
                Payment_Request__c primaryPR = mapIdToPR.get(pr.Id);
                decimal amount1 = pr.amount__c;
                decimal amount2 = primaryPR != null ? primaryPR.Amount__c : 0;
                //SOB-403 added cdm cash condition
                amount1 = (pr.Mode__c != 'International Wire Transfer' && pr.Mode__c != 'CDM Cash' && pr.currency__c != 'AED') || 
                ((pr.Mode__c == 'International Wire Transfer' || pr.Mode__c == 'CDM Cash') && pr.status__c != 'Approved' && pr.currency__c != 'AED')?  (Double)(amount1*currToRate.get(pr.currency__c)) : pr.amount__c;
                if(primaryPR != null)
                	amount2 =  (primaryPR.Mode__c != 'International Wire Transfer' && primaryPR.Mode__c != 'CDM Cash'  && primaryPR.currency__c != 'AED') 
                    || ((primaryPR.Mode__c == 'International Wire Transfer'
                    || primaryPR.Mode__c == 'CDM Cash') && primaryPR.status__c != 'Approved' && primaryPR.status__c != 'Partially Approved' && primaryPR.currency__c != 'AED')?  (Double)(amount2*currToRate.get(primaryPR.currency__c)) : primaryPR.amount__c;
                pr.Total_Amount__c = amount1 + amount2;
                
            }
        }
        totalAmountFirstRunFlag1 = false;
    }
    
    public static void calculateTotalAmountOnPrimaryPrChange(List<Payment_Request__c> newList, Map<Id,Payment_Request__c> oldMap){
        set<id> calculateTotalAmount = new Set<Id>();
        map<string,decimal> currToRate = new map<string,decimal>();
        for(Currency_Rate__mdt currRate : [select MasterLabel, Rate__c from Currency_Rate__mdt]){
            currToRate.put(currRate.MasterLabel,currRate.Rate__c);
        }
        for(Payment_Request__c pr : newList){
            if(pr.Mode_Option__c == 'Multi Mode' && oldmap.get(pr.Id).Amount__c != pr.Amount__c && pr.Secondary_Mode__c == null){
                if(pr.Payment_Request__c != null) calculateTotalAmount.add(pr.Payment_Request__c);
            }
        }
        
        if(calculateTotalAmount.isEmpty() && !Test.isRunningTest()){ return; }
        
        Map<Id,Payment_Request__c> mapIdToPR = new Map<Id,Payment_Request__c>();
        for(Payment_Request__c pr : [SELECT Id,Amount__c,Currency__c,status__c,Mode__c,Payment_Request__c FROM Payment_Request__c WHERE Id IN : calculateTotalAmount]){ mapIdToPR.put(pr.Id, pr); }
        
        List<Payment_Request__c> prToupdate = new List<Payment_Request__c>();
        for(Payment_Request__c pr : newList){
            if(calculateTotalAmount.contains(pr.Payment_Request__c)){
                Payment_Request__c secPR = mapIdToPR.get(pr.Payment_Request__c);
                decimal amount1 = pr.amount__c; decimal amount2 = secPR != null ? secPR.Amount__c : 0;
                //SOB-403 added cdm cash condition
                amount1 = (pr.Mode__c != 'International Wire Transfer' && pr.Mode__c != 'CDM Cash' && pr.currency__c != 'AED') || ((pr.Mode__c == 'International Wire Transfer' || pr.Mode__c == 'CDM Cash' ) && pr.status__c != 'Approved' && pr.status__c != 'Partially Approved' && pr.currency__c != 'AED')?  (Double)(amount1*currToRate.get(pr.currency__c)) : pr.amount__c;
                if(secPR!=null){
                    amount2 =  (secPR.Mode__c != 'International Wire Transfer' && secPR.Mode__c != 'CDM Cash' && secPR.currency__c != 'AED') || ((secPR.Mode__c == 'International Wire Transfer'|| secPR.Mode__c == 'CDM Cash' ) && secPR.status__c != 'Approved' && secPR.currency__c != 'AED')?  (Double)(amount2*currToRate.get(secPR.currency__c)) : secPR.amount__c;
                    secPR.Total_Amount__c = amount1 + amount2; prToupdate.add(secPR);
                }
            }
        }
        
        update prToUpdate;
        totalAmountFirstRunFlag2 = false;
    }
    
   
    /*
    @purpose - SOB-336 Unit blocking conflict - Both PR approved through website link
    @param 1 - Trigger.New
    @param 2 - Trigger.OldMap
    @createdby - Aayushi Goel
    @createdDate - 14 Apr-2022
    */
    public static void checkIfUnitConflict(List<Payment_Request__c> newList, Map<Id,Payment_Request__c > oldMap){
        Map<Id,Payment_Request__c> mapUnitToPr = new Map<Id,Payment_Request__c>();
        List<Id> secondaryModePrIds = new List<Id>();
        for(Payment_Request__c pr : newList){
            //check if PR status is getting changed to any approved status
            if((pr.status__c == 'Approved' || pr.status__c == 'Partially Approved'
                || pr.status__c == 'Submitted to Accounts for Amount Confirmation') && pr.status__c != oldMap.get(pr.id).status__c
               && pr.unit__c != null && pr.From_Booking__c == false){
                   mapUnitToPr.put(pr.unit__c,pr);
                   if(pr.payment_request__c != null){ secondaryModePrIds.add(pr.payment_request__c); }
               }
            
        } 
        
        map<string,Payment_Request__c> existingPrToStatus = new map<string,Payment_Request__c>();
        for(Payment_Request__c pr : [select Id,status__c,Mode_Option__c from Payment_Request__c where Id IN: secondaryModePrIds]){ existingPrToStatus.put(pr.Id,pr); }
        
        //if no records found then return from here
        if(mapUnitToPr.keySet().size() == 0){
            return;
        }
        
        list<Payment_Request__c> prListToCheck = [SELECT id,name,Unit__c,Booking__c,Booking__r.Status__c,Unit__r.Unit_Status__c
                                                  FROM Payment_Request__c 
                                                  WHERE Unit__c IN : mapUnitToPr.keySet() AND 
                                                  Status__c IN ( 'Approved','Partially Approved','Submitted to Accounts for Amount Confirmation') AND 
                                                  ID Not IN : newList AND 
                                                  Id Not IN: secondaryModePrIds AND From_Booking__c = false];
        
        //check if there are any PR records for same unit in approved status
        for(Payment_Request__c pr : prListToCheck){
            if(mapUnitToPr.containsKey(pr.Unit__c)){
                Payment_Request__c newPR = mapUnitToPr.get(pr.Unit__c);
                if(newPR!=null && newPR.Mode_Option__c=='Single Mode'){
                    if(pr.Unit__r.Unit_Status__c != 'Available'){
                        newPR.addError(System.label.PR_Unit_Conflict_Error +' '+pr.name);
                    }
                }
                if(newPR!=null && newPR.Mode_Option__c=='Multi Mode'){
                    if(newPR.Payment_Request__c == null){
                        if(pr.Unit__r.Unit_Status__c != 'Available'){
                            newPR.addError(System.label.PR_Unit_Conflict_Error +' '+pr.name);
                        }
                    }
                    else{
                        Payment_Request__c primaryPR = existingPrToStatus.get(newPR.Payment_Request__c);
                        if(primaryPR != null && primaryPR.Mode_Option__c=='Multi Mode' && primaryPR.Status__c != 'Approved' && primaryPR.Status__c != 'Partially Approved' && primaryPR.Status__c != 'Submitted to Accounts for Amount Confirmation'){
                            newPR.addError(System.label.PR_Unit_Conflict_Error +' '+pr.name);
                        }
                    }
                }
            }
        }//end for loop
        
    }//end method checkIfUnitConflict
    
     /*
@purpose - SOB-477 fields to capture finance
@param 1 - Trigger.New
@param 2 - Trigger.OldMap
@createdby - Yamini Jakka
@createdDate - 09 May-2023
*/
    public static void financeUserFieldsUpdate(List<Payment_Request__c> newList, Map<Id,Payment_Request__c > oldMap){
        //Capture Accounts Team Modifications
        Id profileid = UserInfo.getProfileId();
        Id userId = UserInfo.getUserId();
        
        String profileName = [Select Name from Profile where Id =: profileid].Name;
        
        if(profileName.containsIgnoreCase('Finance') || test.isRunningTest()){
            
            for(Payment_Request__c prData : newList){
                
                if(oldmap.get(prData.Id).Status__c != prData.Status__c){
                    prData.Modified_By__c = userId;
                    prData.Modified_Date_and_Time__c = DateTime.Now();
                }
                
                if(oldmap.get(prData.Id).Account_Remarks__c != prData.Account_Remarks__c){ prData.Modified_By__c = userId; prData.Modified_Date_and_Time__c = DateTime.Now();}   
            }            
        }
        
        financeUserFlag = false;
        
    }
}